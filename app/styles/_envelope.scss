// Envelope Opening Animation Styles

.envelope-container {
  position: relative;
  width: 100%;
  height: 100%;
  perspective: 1500px;
  overflow: hidden;
}

.envelope-flap {
  position: fixed;
  left: 0;
  right: 0;
  width: 100%;
  z-index: 100;
  background: linear-gradient(135deg, 
    hsl(var(--color-primary-200)) 0%,
    hsl(var(--color-primary-300)) 50%,
    hsl(var(--color-primary-200)) 100%
  );
  transform-origin: center;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
  
  // Dark mode
  .dark & {
    background: linear-gradient(135deg, 
      hsl(var(--color-primary-800)) 0%,
      hsl(var(--color-primary-900)) 50%,
      hsl(var(--color-primary-800)) 100%
    );
  }

  // Add envelope texture/pattern
  &::before {
    content: '';
    position: absolute;
    inset: 0;
    background: 
      linear-gradient(45deg, transparent 48%, rgba(255, 255, 255, 0.1) 49%, rgba(255, 255, 255, 0.1) 51%, transparent 52%),
      linear-gradient(-45deg, transparent 48%, rgba(255, 255, 255, 0.1) 49%, rgba(255, 255, 255, 0.1) 51%, transparent 52%);
    background-size: 30px 30px;
    opacity: 0.3;
  }

  // Add border accent
  &::after {
    content: '';
    position: absolute;
    inset: 0;
    border: 2px solid hsl(var(--color-primary-400) / 0.5);
    pointer-events: none;
    
    .dark & {
      border-color: hsl(var(--color-primary-600) / 0.5);
    }
  }
}

.envelope-flap-top {
  top: 0;
  height: 50vh;
  animation: envelope-open-top 2s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
  clip-path: polygon(0 0, 100% 0, 100% 100%, 50% 85%, 0 100%);
  
  &::after {
    clip-path: polygon(0 0, 100% 0, 100% 100%, 50% 85%, 0 100%);
  }
}

.envelope-flap-bottom {
  bottom: 0;
  height: 50vh;
  animation: envelope-open-bottom 2s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
  clip-path: polygon(0 0, 50% 15%, 100% 0, 100% 100%, 0 100%);
  
  &::after {
    clip-path: polygon(0 0, 50% 15%, 100% 0, 100% 100%, 0 100%);
  }
}

.envelope-content {
  opacity: 0;
  transform: translateY(100px) scale(0.95);
  animation: envelope-content-reveal 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) 1.5s forwards;
}

// Keyframe Animations
@keyframes envelope-open-top {
  0% {
    transform: translateY(0) rotateX(0deg);
    opacity: 1;
  }
  60% {
    transform: translateY(0) rotateX(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(-100%) rotateX(-15deg);
    opacity: 0;
  }
}

@keyframes envelope-open-bottom {
  0% {
    transform: translateY(0) rotateX(0deg);
    opacity: 1;
  }
  60% {
    transform: translateY(0) rotateX(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(100%) rotateX(15deg);
    opacity: 0;
  }
}

@keyframes envelope-content-reveal {
  0% {
    opacity: 0;
    transform: translateY(100px) scale(0.95);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

// Remove envelope after animation completes
.envelope-flap-top,
.envelope-flap-bottom {
  animation-fill-mode: forwards;
  pointer-events: none;
}

// Ensure content is interactive after animation
.envelope-content {
  animation-fill-mode: forwards;
}

// Optional: Add a subtle paper texture
.envelope-paper-texture {
  position: relative;
  
  &::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: 
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(0, 0, 0, 0.02) 2px,
        rgba(0, 0, 0, 0.02) 4px
      );
    pointer-events: none;
    opacity: 0.5;
  }
}
